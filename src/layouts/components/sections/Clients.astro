---
import type { Section } from "@/types";
import type { z } from "astro:content";
import { markdownify } from "@/lib/utils/textConverter";
import { getEntryCTM } from "@/lib/customContentLoader.astro";
import overrideObjects from "@/lib/utils/overrideObjects.ts";
import type { clientsSectionSchema } from "@/sections.schema";
import OptimizedImage from "../utilities/OptimizedImage.astro";
import Carousel from "../cards/Carousel.astro";
import { logos } from "../../../../data/logos";

export type ClientsSection = Section & z.infer<typeof clientsSectionSchema>;

type Props = {
  content?: ClientsSection;
};

let defaultContent = (
  await getEntryCTM("sections", "clients", Astro.currentLocale)
)?.data as ClientsSection;

let actualContent = overrideObjects(
  { ...defaultContent },
  Astro.props.content,
) as ClientsSection;

let {
  enable = true,
  title,
  list,
  description,
  options: { columnsPerRow, appearance } = {},
} = actualContent;

const isDarkAppearance = appearance === "dark";

if (!enable) {
  return null;
}
---

<section class="py-8 md:py-24">
  <div class="container space-y-0 md:space-y-0">
    {
      description && (
        <p
          class="text-center text-sm opacity-80 md:text-2xl"
          data-aos="reveal-anim-top"
          data-aos-duration="2000"
          set:html={markdownify(description)}
        />
      )
    }
    <Carousel tools={logos} />
  </div>
</section>
